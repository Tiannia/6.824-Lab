[some tutorials](https://github.com/chaozh/MIT-6.824)
[Students' Guide to Raft](https://thesquareplanet.com/blog/students-guide-to-raft/)

lab1 ---- 2022/6/6
```
☁  main [main] ⚡  ./test-mr.sh
*** Starting wc test.
2022/06/26 01:26:27 rpc.Register: method "CrashDetector" has 1 input parameters; needs exactly three
2022/06/26 01:26:27 rpc.Register: method "Done" has 1 input parameters; needs exactly three
All tasks are finished, the coordinator is going to exit.
Task execution completed, the worker is going to exit.
--- wc test: PASS
2022/06/26 01:26:41 dialing:dial unix /var/tmp/824-mr-1000: connect: connection refused
2022/06/26 01:26:42 dialing:dial unix /var/tmp/824-mr-1000: connect: connection refused
*** Starting indexer test.
2022/06/26 01:26:44 rpc.Register: method "CrashDetector" has 1 input parameters; needs exactly three
2022/06/26 01:26:44 rpc.Register: method "Done" has 1 input parameters; needs exactly three
All tasks are finished, the coordinator is going to exit.
2022/06/26 01:26:51 dialing:dial unix /var/tmp/824-mr-1000: connect: connection refused
--- indexer test: PASS
2022/06/26 01:26:51 dialing:dial unix /var/tmp/824-mr-1000: connect: connection refused
*** Starting map parallelism test.
2022/06/26 01:26:51 rpc.Register: method "CrashDetector" has 1 input parameters; needs exactly three
2022/06/26 01:26:51 rpc.Register: method "Done" has 1 input parameters; needs exactly three
All tasks are finished, the coordinator is going to exit.
2022/06/26 01:27:01 dialing:dial unix /var/tmp/824-mr-1000: connect: connection refused
2022/06/26 01:27:01 dialing:dial unix /var/tmp/824-mr-1000: connect: connection refused
--- map parallelism test: PASS
*** Starting reduce parallelism test.
2022/06/26 01:27:01 rpc.Register: method "CrashDetector" has 1 input parameters; needs exactly three
2022/06/26 01:27:01 rpc.Register: method "Done" has 1 input parameters; needs exactly three
All tasks are finished, the coordinator is going to exit.
2022/06/26 01:27:10 dialing:dial unix /var/tmp/824-mr-1000: connect: connection refused
--- reduce parallelism test: PASS
2022/06/26 01:27:10 dialing:dial unix /var/tmp/824-mr-1000: connect: connection refused
*** Starting job count test.
2022/06/26 01:27:10 rpc.Register: method "CrashDetector" has 1 input parameters; needs exactly three
2022/06/26 01:27:10 rpc.Register: method "Done" has 1 input parameters; needs exactly three
All tasks are finished, the coordinator is going to exit.
Task execution completed, the worker is going to exit.
2022/06/26 01:27:27 dialing:dial unix /var/tmp/824-mr-1000: connect: connection refused
2022/06/26 01:27:28 dialing:dial unix /var/tmp/824-mr-1000: connect: connection refused
2022/06/26 01:27:28 dialing:dial unix /var/tmp/824-mr-1000: connect: connection refused
--- job count test: PASS
*** Starting early exit test.
2022/06/26 01:27:28 rpc.Register: method "CrashDetector" has 1 input parameters; needs exactly three
2022/06/26 01:27:28 rpc.Register: method "Done" has 1 input parameters; needs exactly three
All tasks are finished, the coordinator is going to exit.
Task execution completed, the worker is going to exit.
2022/06/26 01:27:36 dialing:dial unix /var/tmp/824-mr-1000: connect: connection refused
2022/06/26 01:27:36 dialing:dial unix /var/tmp/824-mr-1000: connect: connection refused
--- early exit test: PASS
*** Starting crash test.
2022/06/26 01:27:36 rpc.Register: method "CrashDetector" has 1 input parameters; needs exactly three
2022/06/26 01:27:36 rpc.Register: method "Done" has 1 input parameters; needs exactly three
The task[2] may has crashed, and has taken 10 seconds.
The task[3] may has crashed, and has taken 10 seconds.
The task[0] may has crashed, and has taken 10 seconds.
The task[2] may has crashed, and has taken 11 seconds.
The task[8] may has crashed, and has taken 11 seconds.
The task[10] may has crashed, and has taken 10 seconds.
The task[17] may has crashed, and has taken 11 seconds.
All tasks are finished, the coordinator is going to exit.
Task execution completed, the worker is going to exit.
Task execution completed, the worker is going to exit.
2022/06/26 01:28:16 dialing:dial unix /var/tmp/824-mr-1000: connect: connection refused
--- crash test: PASS
*** PASSED ALL TESTS
```
lab2 ---- 2022/6/19
```
☁  raft [main] ⚡  go test -race
Test (2A): initial election ...
  ... Passed --   3.1  3   50   13664    0
Test (2A): election after network failure ...
  ... Passed --   4.5  3  118   22044    0
Test (2A): multiple elections ...
  ... Passed --   5.7  7  576  104611    0
Test (2B): basic agreement ...
  ... Passed --   0.7  3   16    4366    3
Test (2B): RPC byte count ...
  ... Passed --   1.9  3   48  113754   11
Test (2B): agreement after follower reconnects ...
  ... Passed --   5.8  3  115   29510    8
Test (2B): no agreement if too many followers disconnect ...
  ... Passed --   3.5  5  216   40254    3
Test (2B): concurrent Start()s ...
  ... Passed --   0.7  3   12    3246    6
Test (2B): rejoin of partitioned leader ...
  ... Passed --   6.3  3  153   36392    4
Test (2B): leader backs up quickly over incorrect follower logs ...
  ... Passed --  21.3  5 1948 1241814  103
Test (2B): RPC counts aren't too high ...
  ... Passed --   2.2  3   36   10262   12
Test (2C): basic persistence ...
  ... Passed --   3.7  3   74   18887    6
Test (2C): more persistence ...
  ... Passed --  15.2  5  958  183238   16
Test (2C): partitioned leader and one follower crash, leader restarts ...
  ... Passed --   1.5  3   33    8244    4
Test (2C): Figure 8 ...
  ... Passed --  27.6  5 1151  229963   43
Test (2C): unreliable agreement ...
  ... Passed --   2.4  5  242   84113  246
Test (2C): Figure 8 (unreliable) ...
  ... Passed --  39.5  5 7501 15490661  105
Test (2C): churn ...
  ... Passed --  16.5  5 2515 2825429  855
Test (2C): unreliable churn ...
  ... Passed --  16.5  5 1686 1089356  356
Test (2D): snapshots basic ...
  ... Passed --   5.3  3  138   47118  201
Test (2D): install snapshots (disconnect) ...
  ... Passed --  66.1  3 1339  529242  312
Test (2D): install snapshots (disconnect+unreliable) ...
  ... Passed --  70.8  3 1526  634671  335
Test (2D): install snapshots (crash) ...
  ... Passed --  32.5  3  646  349306  335
Test (2D): install snapshots (unreliable+crash) ...
  ... Passed --  43.1  3  818  373066  321
Test (2D): crash and restart all servers ...
  ... Passed --  10.4  3  272   78232   62
PASS
ok      6.824/raft      406.666s
```
lab3 ---- 2022/6/26
```
☁  kvraft [main] ⚡  go test -race
Test: one client (3A) ...
  ... Passed --  15.2  5  4552  765
Test: ops complete fast enough (3A) ...
  ... Passed --  22.2  3  3752    0
Test: many clients (3A) ...
  ... Passed --  15.7  5  4858 1047
Test: unreliable net, many clients (3A) ...
  ... Passed --  16.5  5  5766  863
Test: concurrent append to same key, unreliable (3A) ...
  ... Passed --   0.7  3   175   52
Test: progress in majority (3A) ...
  ... Passed --   0.5  5    52    2
Test: no progress in minority (3A) ...
  ... Passed --   1.0  5   132    3
Test: completion after heal (3A) ...
  ... Passed --   1.0  5    48    3
Test: partitions, one client (3A) ...
  ... Passed --  22.8  5  5195  738
Test: partitions, many clients (3A) ...
  ... Passed --  23.3  5  6532 1091
Test: restarts, one client (3A) ...
  ... Passed --  19.1  5  5554  823
Test: restarts, many clients (3A) ...
  ... Passed --  20.3  5  7352 1118
Test: unreliable net, restarts, many clients (3A) ...
  ... Passed --  20.8  5  6641  874
Test: restarts, partitions, many clients (3A) ...
  ... Passed --  27.4  5 12142 1101
Test: unreliable net, restarts, partitions, many clients (3A) ...
  ... Passed --  27.0  5  7445  667
Test: unreliable net, restarts, partitions, random keys, many clients (3A) ...
  ... Passed --  32.7  7 17601  848
Test: InstallSnapshot RPC (3B) ...
  ... Passed --   3.4  3   617   63
Test: snapshot size is reasonable (3B) ...
  ... Passed --  17.3  3  5606  800
Test: ops complete fast enough (3B) ...
  ... Passed --  26.6  3  8242    0
Test: restarts, snapshots, one client (3B) ...
  ... Passed --  18.8  5  8998  641
Test: restarts, snapshots, many clients (3B) ...
  ... Passed --  20.3  5 19157 6463
Test: unreliable net, snapshots, many clients (3B) ...
  ... Passed --  16.7  5  7898 1153
Test: unreliable net, restarts, snapshots, many clients (3B) ...
  ... Passed --  20.7  5  8261 1117
Test: unreliable net, restarts, partitions, snapshots, many clients (3B) ...
  ... Passed --  28.4  5  8062  476
Test: unreliable net, restarts, partitions, snapshots, random keys, many clients (3B) ...
  ... Passed --  29.7  7 21939 1688
PASS
ok      6.824/kvraft    448.240s
```
lab4A
```
☁  shardctrler [main] ⚡  go test -race
Test: Basic leave/join ...
  ... Passed
Test: Historical queries ...
  ... Passed
Test: Move ...
  ... Passed
Test: Concurrent leave/join ...
  ... Passed
Test: Minimal transfers after joins ...
  ... Passed
Test: Minimal transfers after leaves ...
  ... Passed
Test: Multi-group join/leave ...
  ... Passed
Test: Concurrent multi leave/join ...
  ... Passed
Test: Minimal transfers after multijoins ...
  ... Passed
Test: Minimal transfers after multileaves ...
  ... Passed
Test: Check Same config on servers ...
  ... Passed
PASS
ok      6.824/shardctrler       3.013s
```
lab4B
```
☁  shardkv [main] ⚡  go test
Test: static shards ...
  ... Passed
Test: join then leave ...
  ... Passed
Test: snapshots, join, and leave ...
  ... Passed
Test: servers miss configuration changes...
  ... Passed
Test: concurrent puts and configuration changes...
  ... Passed
Test: more concurrent puts and configuration changes...
  ... Passed
Test: concurrent configuration change and restart...
  ... Passed
Test: unreliable 1...
  ... Passed
Test: unreliable 2...
  ... Passed
Test: unreliable 3...
  ... Passed
Test: shard deletion (challenge 1) ...
  ... Passed
Test: unaffected shard access (challenge 2) ...
  ... Passed
Test: partial migration shard access (challenge 2) ...
  ... Passed
PASS
ok      6.824/shardkv   128.572s
```
😥 but with '-race', TEST FAIL
```
☁  shardkv [main] ⚡  go test -race 
Test: static shards ...
  ... Passed
Test: join then leave ...
  ... Passed
Test: snapshots, join, and leave ...
  ... Passed
Test: servers miss configuration changes...
  ... Passed
Test: concurrent puts and configuration changes...
race: limit on 8128 simultaneously alive goroutines is exceeded, dying
exit status 66
FAIL    6.824/shardkv   51.413s
```